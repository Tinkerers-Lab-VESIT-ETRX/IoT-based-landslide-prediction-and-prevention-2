<!DOCTYPE html>
<html lang="en">
    <head>
 
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
       
      </head>
<style>
body{
    background-color: rgba(5, 26, 127,0.6);

 }
    h3{font-family: "Times New Roman", Times, serif;}
    p{font-family: "Times New Roman";}
</style>
<body>
   
<h3>Gaurav Ghugare-D11B</h3>   
<h3>SENSOR DATA PLOTTING</h3>
<h3>DHT11(Temperature, Humidity and Heat Index)</h3>
<p>Please select the date (Test mode data only available for 06/28/2021).</p>
<input type = "date"  id="demo">  
<button class="btn btn-success" type="button" onclick=myFunction()>Plot Line Graph</button>
 <div id="chartContainer"></div>
    <canvas id="chart" width="400" height="400"></canvas>

<script language = "javascript" type = "text/javascript">
 
 
function myFunction() {
    var selectedDate=document.getElementById("demo").value;
    console.log(selectedDate);

    const Http = new XMLHttpRequest();
    const url='https://fir-demo-1ca82-default-rtdb.firebaseio.com/Temperature Data.json';
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange = () => {
        if (Http.readyState == 4 && Http.status == 200) {
            console.log(Http.responseText);
            var resData=JSON.parse(Http.responseText);
            console.log(resData);
            var i;
            var plotData=[];

            for(i=0;i<resData.length;i++) {
                var y=resData[i]['reading']
                if(resData[i]['date']==selectedDate){
                var temp1=resData[i]['date'].split('-');
                var temp2=resData[i]['time'].split(':');
                var x=new Date(temp1[0],temp1[1]-1,temp1[2],temp2[0],temp2[1]);
                console.log(x,y);
                plotData.push({x:x,y:y});
                }
               
            }
           
            //console.log(plotData);
            if(plotData.length!=0){
                var chart = new CanvasJS.Chart("chartContainer",
                {
                    title:{
                        text: "TEMPERATURE"
                    },
                    axisX:{
                        gridColor: "cyan" ,
                        gridThickness: 2        
                    },
                    axisY:{        
                        gridColor: "cyan"
                    },
                    data: [
                        {
                            type: "line",

                            dataPoints: plotData
                        }

                    ]
                });

                chart.render();
            }
            else{
                document.getElementById("chartContainer").innerHTML="No data available for this date."
            }
        }
    }
    Http.open("GET", url);
   
    Http.send();
    
   

}

</script>
<h3>
</h3>
<button class="btn btn-success" type="button" onclick=myFunction1()>Plot Bar Graph</button>
 <div id="chartContainer1"></div>
    <canvas id="chart" width="400" height="400"></canvas>

<script language = "javascript" type = "text/javascript">
 
 
function myFunction1() {
    var selectedDate=document.getElementById("demo").value;
    console.log(selectedDate);

    const Http = new XMLHttpRequest();
    const url='https://fir-demo-1ca82-default-rtdb.firebaseio.com/Temperature Data.json';
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange = () => {
        if (Http.readyState == 4 && Http.status == 200) {
            console.log(Http.responseText);
            var resData=JSON.parse(Http.responseText);
            console.log(resData);
            var i;
            var plotData=[];

            for(i=0;i<resData.length;i++) {
                var y=resData[i]['reading']
                if(resData[i]['date']==selectedDate){
                var temp1=resData[i]['date'].split('-');
                var temp2=resData[i]['time'].split(':');
                var x=new Date(temp1[0],temp1[1]-1,temp1[2],temp2[0],temp2[1]);
                console.log(x,y);
                plotData.push({x:x,y:y});
                }
               
            }
           
            //console.log(plotData);
            if(plotData.length!=0){
                var chart = new CanvasJS.Chart("chartContainer1",
                {
                    title:{
                        text: "TEMPERATURE"
                    },
                    axisX:{
                        gridColor: "cyan" ,
                        gridThickness: 2        
                    },
                    axisY:{        
                        gridColor: "cyan"
                    },
                    data: [
                        {
                            type: "bar",

                            dataPoints: plotData
                        }

                    ]
                });

                chart.render();
            }
            else{
                document.getElementById("chartContainer1").innerHTML="No data available for this date."
            }
        }
    }
    Http.open("GET", url);
   
    Http.send();
    
   

}

</script>
<h3>
</h3>
<button class="btn btn-success" type="button" onclick=myFunction2()>Plot Line Graph</button>
 <div id="chartContainer2"></div>
    <canvas id="chart" width="400" height="400"></canvas>

<script language = "javascript" type = "text/javascript">
 
 
function myFunction2() {
    var selectedDate=document.getElementById("demo").value;
    console.log(selectedDate);

    const Http = new XMLHttpRequest();
    const url='https://fir-demo-1ca82-default-rtdb.firebaseio.com/Humidity Data.json';
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange = () => {
        if (Http.readyState == 4 && Http.status == 200) {
            console.log(Http.responseText);
            var resData=JSON.parse(Http.responseText);
            console.log(resData);
            var i;
            var plotData=[];

            for(i=0;i<resData.length;i++) {
                var y=resData[i]['reading']
                if(resData[i]['date']==selectedDate){
                var temp1=resData[i]['date'].split('-');
                var temp2=resData[i]['time'].split(':');
                var x=new Date(temp1[0],temp1[1]-1,temp1[2],temp2[0],temp2[1]);
                console.log(x,y);
                plotData.push({x:x,y:y});
                }
               
            }
           
            //console.log(plotData);
            if(plotData.length!=0){
                var chart = new CanvasJS.Chart("chartContainer2",
                {
                    title:{
                        text: "Humidity"
                    },
                    axisX:{
                        gridColor: "cyan" ,
                        gridThickness: 2        
                    },
                    axisY:{        
                        gridColor: "cyan"
                    },
                    data: [
                        {
                            type: "line",

                            dataPoints: plotData
                        }

                    ]
                });

                chart.render();
            }
            else{
                document.getElementById("chartContainer2").innerHTML="No data available for this date."
            }
        }
    }
    Http.open("GET", url);
   
    Http.send();
    
   

}

</script>
<h3>
</h3>
<button class="btn btn-success" type="button" onclick=myFunction3()>Plot Bar Graph</button>
 <div id="chartContainer3"></div>
    <canvas id="chart" width="400" height="400"></canvas>

<script language = "javascript" type = "text/javascript">
 
 
function myFunction3() {
    var selectedDate=document.getElementById("demo").value;
    console.log(selectedDate);

    const Http = new XMLHttpRequest();
    const url='https://fir-demo-1ca82-default-rtdb.firebaseio.com/Humidity Data.json';
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange = () => {
        if (Http.readyState == 4 && Http.status == 200) {
            console.log(Http.responseText);
            var resData=JSON.parse(Http.responseText);
            console.log(resData);
            var i;
            var plotData=[];

            for(i=0;i<resData.length;i++) {
                var y=resData[i]['reading']
                if(resData[i]['date']==selectedDate){
                var temp1=resData[i]['date'].split('-');
                var temp2=resData[i]['time'].split(':');
                var x=new Date(temp1[0],temp1[1]-1,temp1[2],temp2[0],temp2[1]);
                console.log(x,y);
                plotData.push({x:x,y:y});
                }
               
            }
           
            //console.log(plotData);
            if(plotData.length!=0){
                var chart = new CanvasJS.Chart("chartContainer3",
                {
                    title:{
                        text: "Humidity"
                    },
                    axisX:{
                        gridColor: "cyan" ,
                        gridThickness: 2        
                    },
                    axisY:{        
                        gridColor: "cyan"
                    },
                    data: [
                        {
                            type: "bar",

                            dataPoints: plotData
                        }

                    ]
                });

                chart.render();
            }
            else{
                document.getElementById("chartContainer3").innerHTML="No data available for this date."
            }
        }
    }
    Http.open("GET", url);
   
    Http.send();
    
   

}

</script>
<h3>
</h3>
<button class="btn btn-success" type="button" onclick=myFunction5()>Plot Line Graph</button>
 <div id="chartContainer5"></div>
    <canvas id="chart" width="400" height="400"></canvas>

<script language = "javascript" type = "text/javascript">
 
 
function myFunction5() {
    var selectedDate=document.getElementById("demo").value;
    console.log(selectedDate);

    const Http = new XMLHttpRequest();
    const url='https://fir-demo-1ca82-default-rtdb.firebaseio.com/Heat index.json';
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange = () => {
        if (Http.readyState == 4 && Http.status == 200) {
            console.log(Http.responseText);
            var resData=JSON.parse(Http.responseText);
            console.log(resData);
            var i;
            var plotData=[];

            for(i=0;i<resData.length;i++) {
                var y=resData[i]['reading']
                if(resData[i]['date']==selectedDate){
                var temp1=resData[i]['date'].split('-');
                var temp2=resData[i]['time'].split(':');
                var x=new Date(temp1[0],temp1[1]-1,temp1[2],temp2[0],temp2[1]);
                console.log(x,y);
                plotData.push({x:x,y:y});
                }
               
            }
           
            //console.log(plotData);
            if(plotData.length!=0){
                var chart = new CanvasJS.Chart("chartContainer5",
                {
                    title:{
                        text: "Heat Index"
                    },
                    axisX:{
                        gridColor: "cyan" ,
                        gridThickness: 2        
                    },
                    axisY:{        
                        gridColor: "cyan"
                    },
                    data: [
                        {
                            type: "line",

                            dataPoints: plotData
                        }

                    ]
                });

                chart.render();
            }
            else{
                document.getElementById("chartContainer5").innerHTML="No data available for this date."
            }
        }
    }
    Http.open("GET", url);
   
    Http.send();
    
   

}

</script>
<h3>
</h3>
<button class="btn btn-success" type="button" onclick=myFunction4()>Plot Bar Graph</button>
 <div id="chartContainer4"></div>
    <canvas id="chart" width="400" height="400"></canvas>

<script language = "javascript" type = "text/javascript">
 
 
function myFunction4() {
    var selectedDate=document.getElementById("demo").value;
    console.log(selectedDate);

    const Http = new XMLHttpRequest();
    const url='https://fir-demo-1ca82-default-rtdb.firebaseio.com/Heat index.json';
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange = () => {
        if (Http.readyState == 4 && Http.status == 200) {
            console.log(Http.responseText);
            var resData=JSON.parse(Http.responseText);
            console.log(resData);
            var i;
            var plotData=[];

            for(i=0;i<resData.length;i++) {
                var y=resData[i]['reading']
                if(resData[i]['date']==selectedDate){
                var temp1=resData[i]['date'].split('-');
                var temp2=resData[i]['time'].split(':');
                var x=new Date(temp1[0],temp1[1]-1,temp1[2],temp2[0],temp2[1]);
                console.log(x,y);
                plotData.push({x:x,y:y});
                }
               
            }
           
            //console.log(plotData);
            if(plotData.length!=0){
                var chart = new CanvasJS.Chart("chartContainer4",
                {
                    title:{
                        text: "Heat Index"
                    },
                    axisX:{
                        gridColor: "cyan" ,
                        gridThickness: 2        
                    },
                    axisY:{        
                        gridColor: "cyan"
                    },
                    data: [
                        {
                            type: "bar",

                            dataPoints: plotData
                        }

                    ]
                });

                chart.render();
            }
            else{
                document.getElementById("chartContainer4").innerHTML="No data available for this date."
            }
        }
    }
    Http.open("GET", url);
   
    Http.send();
    
   

}

</script>


</body>
</html>